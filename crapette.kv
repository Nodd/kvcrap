#:kivy 1.11.0

BoxLayout:
    orientation: "vertical"
    canvas:
        Color:
            rgb: 0, 0.5, 0
        Rectangle:
            size: self.size

    BoxLayout:
        Spacer:
        PlayerPileWidget:
        PlayerPileWidget:
        PlayerPileWidget:
        Spacer:
    BoxLayout:
        TableauWidgetLeft:
        FoundationWidget:
        FoundationWidget:
        TableauWidgetRight:
    BoxLayout:
        TableauWidgetLeft:
        FoundationWidget:
        FoundationWidget:
        TableauWidgetRight:
    BoxLayout:
        TableauWidgetLeft:
        FoundationWidget:
        FoundationWidget:
        TableauWidgetRight:
    BoxLayout:
        TableauWidgetLeft:
        FoundationWidget:
        FoundationWidget:
        TableauWidgetRight:
    BoxLayout:
        Spacer:
        PlayerPileWidget:
        PlayerPileWidget:
        PlayerPileWidget:
        Spacer:

    # BoxLayout:
    #     orientation: 'horizontal'
    #     size_hint: 1, None
    #     # height: app.menu_height
    #     # spacing: 0.01*win.Window.width
    #     # padding: app.pad_by, app.pad_by, app.pad_by, app.pad_by

    #     canvas.before:
    #         Color:
    #             rgba: 0.1, 0.4, 0.1, 1
    #         Rectangle:
    #             pos: self.pos
    #             size: self.size

    #     Spinner:
    #         id: menu
    #         text: "Menu"
    #         size_hint: None, None
    #         # size: 0.18*win.Window.width, app.menu_height-2*app.pad_by

    #     Button:
    #         text: 'CRAPETTE'
    #         on_press: app.crapette()

    #     Spinner:
    #         id: menu_smileys
    #         text: "Smileys :o)"
    #         size_hint: None, None
    #         # size: 0.18*win.Window.width, app.menu_height-2*app.pad_by


<FoundationWidget@RelativeLayout>:
    size_hint: None, 1
    size: self.height, self.height
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    FoundationBackground:
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    FoundationSuit:
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        source: "images/png/2x/suit-heart.png"

<TableauWidgetRight@RelativeLayout>:
    size_hint: 0.5, 1
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    PileBackground:
        pos_hint: {'left': 1, 'center_y': 0.5}

<TableauWidgetLeft@RelativeLayout>:
    size_hint: 0.5, 1
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}

    PileBackground:
        pos_hint: {'right': 1, 'center_y': 0.5}

<PlayerPileWidget@RelativeLayout>:
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    size_hint: None, 1
    size: image.size

    PileBackground:
        id: image
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

<PileBackground@Image>:
    source: 'images/png/2x/card-base.png'
    keep_ratio: True
    allow_stretch: True
    size_hint: None, 1
    size: self.texture_size[0] / self.texture.size[1] * self.height, self.height
    opacity: 0.1

<FoundationBackground@PileBackground>:
    canvas.before:
        PushMatrix
        Rotate:
            angle: 90
            axis: 0, 0, 1
            origin: self.center
    canvas.after:
        PopMatrix

<FoundationSuit@Image>:
    id: parent
    keep_ratio: True
    allow_stretch: True
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    size_hint: 1/3, 1/3
    opacity: 0.3

    canvas.before:
        PushMatrix
        Rotate:
            angle: 90 if "center_x" in parent.pos_hint and parent.pos_hint["center_x"] < 0.5 else -90
            axis: 0, 0, 1
            origin: root.center
    canvas.after:
        PopMatrix

<Spacer@Widget>:
    size_hint: 0.5, 1

<NbCards@Label>:
    size_hint: None, None
    size: 50, 20
    halign: "center"
    valign: "top"
    text: "99"
